# Repository Documentation Generator

## Instructions for Claude Code Agent

Create comprehensive documentation for a repository by analyzing its structure, code, and functionality, then generating organized markdown files in a `./doc` directory at the repository root.

### Workflow Steps

1. **Repository Analysis**
   - Scan the entire repository structure
   - Identify programming languages, frameworks, and technologies used
   - Locate configuration files, build scripts, and deployment files
   - Find existing documentation (README, comments, etc.)
   - Identify entry points, main modules, and key components

2. **Create Documentation Directory Structure**
   - Create `./doc` directory at repository root
   - Organize documentation into logical subdirectories:
     ```
     ./doc/
     ├── README.md                 # Documentation index
     ├── architecture/
     │   ├── overview.md
     │   ├── components.md
     │   └── data-flow.md
     ├── api/
     │   ├── endpoints.md
     │   ├── authentication.md
     │   └── examples.mdx
     ├── setup/
     │   ├── installation.md
     │   ├── development.md
     │   └── deployment.md
     ├── guides/
     │   ├── getting-started.md
     │   ├── contributing.md
     │   └── best-practices.md
     ├── reference/
     │   ├── configuration.md
     │   ├── cli-commands.md
     │   └── troubleshooting.md
     └── examples/
         ├── basic-usage.mdx
         ├── advanced-features.mdx
         └── integrations.mdx
     ```

3. **Documentation Content Generation**

### Core Documentation Files

#### ./doc/README.md
```markdown
# Project Documentation

Welcome to the [PROJECT_NAME] documentation. This directory contains comprehensive documentation for understanding, setting up, and contributing to this project.

## Quick Navigation

### 🏗️ Architecture
- [Overview](./architecture/overview.md) - High-level system architecture
- [Components](./architecture/components.md) - Detailed component breakdown
- [Data Flow](./architecture/data-flow.md) - How data moves through the system

### 🔌 API Documentation
- [Endpoints](./api/endpoints.md) - Available API endpoints
- [Authentication](./api/authentication.md) - Authentication methods
- [Examples](./api/examples.mdx) - Interactive API examples

### ⚙️ Setup & Deployment
- [Installation](./setup/installation.md) - Installation instructions
- [Development](./setup/development.md) - Development environment setup
- [Deployment](./setup/deployment.md) - Production deployment guide

### 📖 Guides
- [Getting Started](./guides/getting-started.md) - Quick start guide
- [Contributing](./guides/contributing.md) - How to contribute
- [Best Practices](./guides/best-practices.md) - Development best practices

### 📚 Reference
- [Configuration](./reference/configuration.md) - Configuration options
- [CLI Commands](./reference/cli-commands.md) - Command-line interface
- [Troubleshooting](./reference/troubleshooting.md) - Common issues and solutions

### 💡 Examples
- [Basic Usage](./examples/basic-usage.mdx) - Simple usage examples
- [Advanced Features](./examples/advanced-features.mdx) - Complex use cases
- [Integrations](./examples/integrations.mdx) - Third-party integrations

## Project Overview

[Brief description of the project, its purpose, and key features]

## Technology Stack

[List main technologies, frameworks, and tools used]

## Quick Start

[Minimal steps to get the project running]

---
*Documentation generated by Claude Code Agent*
*Last updated: [DATE]*
```

#### Architecture Documentation

**./doc/architecture/overview.md**
- System architecture diagrams (use mermaid syntax)
- Technology stack explanation
- Design patterns and principles
- System boundaries and interfaces
- Performance characteristics

**./doc/architecture/components.md**
- Detailed component breakdown
- Component responsibilities
- Inter-component communication
- Dependency relationships
- Component lifecycle

**./doc/architecture/data-flow.md**
- Data flow diagrams
- Request/response cycles
- Data transformation points
- Storage and caching strategies
- Security considerations

#### API Documentation

**./doc/api/endpoints.md**
- Complete endpoint listing
- HTTP methods and URLs
- Request/response schemas
- Status codes and error handling
- Rate limiting and pagination

**./doc/api/authentication.md**
- Authentication methods
- Token management
- Permission levels
- Security best practices
- Example authentication flows

**./doc/api/examples.mdx** (interactive examples)
```mdx
# API Examples

import { CodeBlock } from '@/components/CodeBlock'
import { ApiExample } from '@/components/ApiExample'

## User Authentication

<ApiExample
  method="POST"
  url="/api/auth/login"
  body={{
    email: "user@example.com",
    password: "securepassword"
  }}
/>

<CodeBlock language="curl">
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"user@example.com","password":"securepassword"}'
</CodeBlock>
```

#### Setup Documentation

**./doc/setup/installation.md**
- System requirements
- Prerequisites installation
- Step-by-step setup process
- Environment configuration
- Verification steps

**./doc/setup/development.md**
- Development environment setup
- IDE configuration
- Development workflow
- Hot reloading and debugging
- Testing procedures

**./doc/setup/deployment.md**
- Production deployment steps
- Environment configuration
- Database setup and migrations
- Monitoring and logging
- Backup and recovery

### Analysis Commands for Repository Understanding

Use these commands to analyze the repository:

```bash
# Repository structure analysis
find . -type f -name "*.md" -o -name "*.mdx" | head -20
find . -name "package.json" -o -name "requirements.txt" -o -name "Cargo.toml" -o -name "go.mod"
find . -name "Dockerfile" -o -name "docker-compose.yml" -o -name ".env*"

# Code analysis
find . -name "*.js" -o -name "*.ts" -o -name "*.py" -o -name "*.go" -o -name "*.rs" | wc -l
grep -r "function\|def\|class\|interface" --include="*.js" --include="*.ts" --include="*.py" . | wc -l

# Configuration files
find . -name "*.json" -o -name "*.yaml" -o -name "*.yml" -o -name "*.toml" -o -name "*.ini"

# Entry points
find . -name "main.*" -o -name "index.*" -o -name "app.*" -o -name "server.*"

# API endpoints (if applicable)
grep -r "app\." --include="*.js" --include="*.ts" . | grep -E "(get|post|put|delete)\(" | head -10
grep -r "@.*Mapping\|@.*Route" --include="*.java" --include="*.kt" . | head -10
grep -r "route\|endpoint" --include="*.py" . | head -10

# Database schemas
find . -name "*.sql" -o -name "*migration*" -o -name "*schema*"

# Tests
find . -name "*test*" -o -name "*spec*" | grep -E "\.(js|ts|py|go|rs)$" | wc -l
```

### Content Analysis Guidelines

1. **Code Structure Analysis**
   - Identify main modules and their purposes
   - Document public APIs and interfaces
   - Note design patterns used
   - Analyze dependencies and relationships

2. **Configuration Analysis**
   - Document all configuration options
   - Explain environment variables
   - Note default values and ranges
   - Provide configuration examples

3. **API Analysis** (if applicable)
   - Document all endpoints
   - Analyze request/response patterns
   - Note authentication requirements
   - Document error handling

4. **Database Analysis** (if applicable)
   - Document schema structure
   - Explain relationships
   - Note indexes and constraints
   - Document migration procedures

### MDX Features for Interactive Documentation

Use MDX for interactive examples:

```mdx
# Interactive Code Examples

import { LiveCodeEditor } from '@/components/LiveCodeEditor'
import { ConfigValidator } from '@/components/ConfigValidator'

## Configuration Example

<ConfigValidator
  schema={{
    port: { type: 'number', default: 3000 },
    database: { type: 'string', required: true }
  }}
/>

## Live Code Example

<LiveCodeEditor
  language="javascript"
  code={`
function calculateTotal(items) {
  return items.reduce((sum, item) => sum + item.price, 0);
}

// Try it out:
const items = [
  { name: 'Coffee', price: 4.50 },
  { name: 'Sandwich', price: 8.00 }
];

console.log(calculateTotal(items));
  `}
/>
```

### Documentation Quality Standards

1. **Completeness**
   - Cover all major components and features
   - Include setup, usage, and troubleshooting
   - Provide examples for all documented features

2. **Accuracy**
   - Test all code examples
   - Verify all commands and procedures
   - Keep documentation in sync with code

3. **Clarity**
   - Use clear, concise language
   - Provide context for technical decisions
   - Include diagrams where helpful

4. **Discoverability**
   - Create clear navigation
   - Use consistent linking
   - Provide search-friendly headings

### Documentation Maintenance

1. **Version Control**
   - Commit all documentation files
   - Use meaningful commit messages
   - Tag documentation versions

2. **Automation Opportunities**
   - Generate API docs from code comments
   - Auto-update configuration references
   - Validate example code in CI

3. **Review Process**
   - Include documentation in code reviews
   - Test documentation during releases
   - Gather user feedback

### File Organization Tips

- Use descriptive filenames
- Group related content in subdirectories
- Create cross-references between related docs
- Maintain a consistent structure across projects
- Use frontmatter for metadata when helpful

### Error Handling

If analysis fails or information is missing:
1. Document what could not be determined
2. Provide placeholders for manual completion
3. Note areas requiring domain expertise
4. Include TODO sections for future updates

### Final Checklist

- [ ] Created ./doc directory structure
- [ ] Generated all core documentation files
- [ ] Included interactive examples in .mdx files
- [ ] Cross-referenced related documentation
- [ ] Tested all code examples
- [ ] Verified all links work
- [ ] Added navigation aids
- [ ] Committed documentation to version control

### Notes

- Prioritize user-facing documentation over internal implementation details
- Include visual aids (diagrams, screenshots) where helpful
- Keep examples simple but realistic
- Update documentation as part of feature development
- Consider documentation as code - apply same quality standards
