# Development commands for Rust Web Shell

# Install dependencies and build assets
setup:
    npm install
    npm run build

# Run development server with auto-reload
dev:
    concurrently "npm run dev" "cargo watch -x run"

# Build for production
build:
    npm run build
    cargo build --release

# Run the application
run:
    cargo run

# Run database migrations
migrate:
    sqlx migrate run

# Create a new migration
migrate-create name:
    sqlx migrate add {{name}}

# Reset database
db-reset:
    rm -f app.db
    sqlx migrate run

# Run tests
test:
    cargo test

# Format code
fmt:
    cargo fmt
    npm run build

# Check code
check:
    cargo check
    cargo clippy

# Clean build artifacts
clean:
    cargo clean
    rm -rf assets/dist/
    rm -rf node_modules/